package cs4_truth_buyco_exercise4;

/**
 *
 * @author Bella Buyco
 */
import java.util.Scanner;

public class cs4_truth_buyco_exercise4 {
    
    public static void main(String[] args){
        
        Scanner sc = new Scanner(System.in);
        boolean exit = true;
        
        Move rock = new Move("Rock");
        Move paper = new Move("Paper");
        Move scissors = new Move("Scissors");
        Move player, computer;

        rock.setStrongAgainst(scissors);
        paper.setStrongAgainst(rock);
        scissors.setStrongAgainst(paper);

        int roundsToWin = 2;
        int result, ans;
        
        do{
            System.out.println("");
            System.out.println("Welcome to Rock, Paper, Scissors. Please choose an option: ");
            System.out.println("1. Start game");
            System.out.println("2. Change number of rounds");
            System.out.println("3. Exit application");
            ans = sc.nextInt();
            
            switch(ans){
                case 1:
                    int playerScore = 0;
                    int computerScore = 0; 
                    boolean aWinner = false;
                    
                    System.out.printf("This match will be first to %s wins. ", roundsToWin);
                    
                    while(!aWinner){
                        
                        int random = (int) Math.floor(Math.random()*3) + 1;
                    
                        System.out.println("The computer has selected its move. Select your move: ");
                        System.out.println("1. Rock");
                        System.out.println("2. Paper");
                        System.out.println("3. Scissors");
                        int n = sc.nextInt();
                        
                        if(n == 1){
                           player = rock;
                        }
                        else if(n == 2){
                            player = paper;
                        }
                        else{
                            player = scissors;
                        }
                    
                        if(random == 1){
                            computer = rock;
                        }
                        else if(random == 2){
                            computer = paper;
                        }
                        else{
                            computer = scissors;
                        }
                        
                        System.out.println(" ");
                        System.out.printf("Player chose %s. Computer chose %s. ", player.getName(), computer.getName());
                        
                        switch(Move.compareMoves(player, computer)){
                            case 0:
                                playerScore += 1;
                                System.out.print("Player wins!");
                                break;
                            case 1:
                                computerScore += 1;
                                System.out.print("Computer wins!");
                                break;
                            case 2:
                                System.out.print("Round is tied!");
                                break;
                        }
                        
                        System.out.println(" ");
                        System.out.printf("Player - %s         Computer - %s", playerScore, computerScore);
                        System.out.println(" ");
                        System.out.println(" ");
                        
                        if(playerScore == roundsToWin || computerScore == roundsToWin){
                            aWinner = true;
                        }
                        
                    }
                    
                    break;
                
                case 2:
                    System.out.println(" ");
                    System.out.print("How many wins are needed to win a match?: ");
                    roundsToWin = sc.nextInt();
                    System.out.println(" ");
                    System.out.println("New setting has been saved!");
                    break;
                    
                case 3:
                    exit = false;
                    break;
                default:
                    System.out.println("Invalid input");
            }
        }
        while(exit);
    }
}
